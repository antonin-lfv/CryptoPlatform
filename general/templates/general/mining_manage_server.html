<!DOCTYPE html>
<html lang="en">
<head>
    {% include('includes/head_content.html') %}

    <title>Your servers</title>

</head>

<body class="layout-top-nav {% if session['theme'] == 'dark' %}dark-skin{% else %}light-skin{% endif %} theme-primary fixed">

<div class="wrapper">
    <div id="loader"></div>

    <!-- Top navbar -->
    {% include('includes/top_navbar.html') %}

    <!-- Navbar -->
    {% include('includes/navbar.html') %}

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <div class="container-full">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="d-flex align-items-center">
                    <div class="me-auto">
                        <h3 class="page-title">Server details</h3>
                        <div class="d-inline-block align-items-center">
                            <nav>
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#"><i class="mdi mdi-home-outline"></i></a>
                                    </li>
                                    <li class="breadcrumb-item" aria-current="page"><a
                                            href="{{ url_for('BLP_general.mining_place') }}">Mining server types</a>
                                    </li>
                                    <li class="breadcrumb-item active" aria-current="page">{{ server_data.name }}
                                        details
                                    </li>
                                </ol>
                            </nav>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Main content -->
            <section class="content">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="box">
                            <div class="box-header with-border">
                                <a href="#"><i class="cc {{ server_data.symbol }} no-margin me-10"
                                               title="{{ server_data.symbol }}"></i></a>
                                <h4 class="box-title">{{ server_data.name }}
                                    <small class="subtitle mt-0">Mining {{ server_data.symbol }} token</small></h4>
                            </div>
                            <div class="box-body">
                                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                                    Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                                    unknown printer took a galley of type and scrambled it to make a type specimen book.
                                    It has survived not only five centuries, but also the leap into electronic
                                    typesetting, remaining essentially unchanged. It was popularised in the 1960s with
                                    the release of Letraset sheets containing Lorem Ipsum passages, and more recently
                                    with desktop publishing software like Aldus PageMaker including versions of Lorem
                                    Ipsum.</p>

                                <div class="row">
                                    <div class="col-12 col-lg-6">
                                        <div class="box text-center bg-info">
                                            <div class="box-body">
                                                <h2 class="mt-20">Token Sale ends in</h2>
                                                <h4 class="text-bold">12 DAYS</h4>
                                                <h2 class="text-bold text-warning mt-20">$4.200.000</h2>
                                                <h4 class="text-bold">of</h4>
                                                <h4 class="text-bold mb-40">$12.000.000</h4>
                                                <a href="{{ url_for('BLP_general.mining_server_invoices', server_name=server_data.name) }}"
                                                   class="btn btn-warning mb-20">Invoices</a><br>
                                                <a href="#" class="btn btn-outline btn-warning mb-30">WHITEPAPER</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        <div class="box text-center bg-success">
                                            <div class="box-header with-border">
                                                <h2 class="box-title text-white">Market Price</h2>
                                            </div>
                                            <div class="box-body">
                                                <div class="div-market-price">
                                                    <h1 class="mb-40">$1,231.91 <small>USD</small></h1>
                                                    <h1 class="mb-30">$0,231.22 <small>EUR</small></h1>
                                                    <h1 class="mb-50">$1,245.61 <small>GBR</small></h1>
                                                    <h4 class="text-white p-10">Average USD/EUR/GBR market price across
                                                        major bitcoin exchanges.</h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="box">
                            <div class="box-header">
                                <h4 class="mb-0 fw-500">Details</h4>
                            </div>
                            <div class="box-body">
                                <div class="row mb-30">
                                    <div class="col-12 col-lg-6">
                                        <h5 class="p-15 mb-0"><strong>Token:</strong> {{ server_data.symbol }}</h5>
                                        <h5 class="p-15 mb-0"><strong>Rent
                                            price:</strong> {{ server_data.rent_amount_per_week }} {{ server_data.symbol }}/week
                                        </h5>
                                        <h5 class="p-15 mb-0"><strong>Server power:</strong> {{ server_data.power }}
                                        </h5>
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        <h5 class="p-15 mb-0"><strong>Server
                                            category:</strong> {{ server_data.category }}</h5>
                                        <h5 class="p-15 mb-0"><strong>Buy
                                            price:</strong> {{ server_data.buy_amount }} {{ server_data.symbol }}</h5>
                                    </div>
                                    <div class="col-12 col-lg-12">
                                        <h5 class="p-15 mb-0"><strong>Maintenance (only if
                                            bought):</strong> {{ server_data.maintenance_cost_per_week }} {{ server_data.symbol }}/week
                                        </h5>
                                    </div>
                                </div>
                            </div>
                            <div class="box-header">
                                <h4 class="mb-0 fw-500">Your configuration</h4>
                            </div>
                            <div class="box-body">
                                <div class="row mb-30">
                                    <div class="col-12 col-lg-6">
                                        <h5 class="p-15 mb-0" id="server_rented"><strong>Server rented:</strong></h5>
                                        <h5 class="p-15 mb-0" id="token_spent_to_buy"><strong>{{ server_data.symbol }} spent to buy:</strong></h5>
                                        <h5 class="p-15 mb-0" id="maintenance_cost"><strong>{{ server_data.symbol }} spent for maintenance:</strong></h5>
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        <h5 class="p-15 mb-0" id="server_bought"><strong>Server bought:</strong></h5>
                                        <h5 class="p-15 mb-0" id="token_spent_to_rent"><strong>{{ server_data.symbol }} spent to rent:</strong></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- /.content -->

        </div>
    </div>
    <!-- /.content-wrapper -->
    <!-- Footer -->
    {% include('includes/footer.html') %}

</div>
<!-- ./wrapper -->

<!-- Page Content overlay -->


{% include('includes/javascript_include_dashboard.html') %}

<script>
    // Get user details of this server with '/api/get_user_mining_server_details/<server_id>/<user_id>'
    function loadUserMiningServerDetails(serverId, userId) {
        $.ajax({
            url: `/api/get_user_mining_server_details/${serverId}/${userId}`, // URL de votre endpoint API
            method: 'GET',
            success: function (serverDetails) {
                $('#server_rented').append(` ${serverDetails.number_of_servers_rented}`);
                $('#server_bought').append(` ${serverDetails.number_of_servers_bought}`);
                $('#token_spent_to_buy').append(` ${serverDetails.total_buy_amount}`);
                $('#token_spent_to_rent').append(` ${serverDetails.total_rent_amount_per_week}/week`);
                $('#maintenance_cost').append(` ${serverDetails.total_maintenance_cost_per_week}/week`);
            },
            error: function (error) {
                console.error('Error:', error);
            }
        });
    }

    $(document).ready(function () {
        loadUserMiningServerDetails('{{ server_data.id }}', '{{ current_user.id }}');
    });
</script>

</body>
</html>
